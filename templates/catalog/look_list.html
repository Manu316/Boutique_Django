{% extends "base.html" %}
{% block title %}Looks - Boutique{% endblock %}

{% block content %}
<h3 class="mb-2">Lookbook</h3>

<p id="lookResultsInfo" class="text-muted small mb-3">
  Mostrando {{ looks|length }} look(s).
</p>

<form class="row g-2 mb-3" method="get">
  <div class="col-12 col-md-4">
    <input
      id="tagFilterInput"
      class="form-control"
      name="tag"
      value="{{ tag|default:'' }}"
      placeholder="Filtrar por tag (boho, verano...)"
      autocomplete="off"
    >
  </div>
  <div class="col">
    <button class="btn btn-primary" type="submit">Aplicar</button>
    <a class="btn btn-outline-secondary" href="{% url 'look_list' %}">Limpiar</a>
  </div>
</form>

<div class="row g-3" id="lookCardsGrid">
  {% for look in looks %}
    <div class="col-6 col-lg-4">

      <a href="{% url 'look_detail' look.id %}"
         class="text-decoration-none text-reset">

        <div
          class="card h-100 look-card"
          data-tags="{{ look.tags|default_if_none:''|lower }}"
        >

          {% if look.cover %}
            <img
              src="{{ look.cover.url }}"
              class="card-img-top card-img-fit"
              alt="{{ look.name }}"
            >
          {% else %}
            <div
              class="card-img-top card-img-fit placeholder-product
                     d-flex align-items-center justify-content-center"
            >
              <i class="bi bi-images" style="font-size: 2.5rem; opacity:.5;"></i>
            </div>
          {% endif %}

          <div class="card-body d-flex flex-column">
            <h6 class="card-title">{{ look.name }}</h6>

            {% if look.tag_list %}
              <p class="text-muted small mb-2">
                {% for t in look.tag_list %}
                  <span class="badge rounded-pill text-bg-secondary badge-chip">
                    {{ t }}
                  </span>
                {% endfor %}
              </p>
            {% endif %}

            <div class="mt-auto">
              <span class="btn btn-sm btn-outline-primary w-100">
                Ver look
              </span>
            </div>
          </div>

        </div>

      </a>

    </div>
  {% empty %}
    <div class="col-12">
      <div class="alert alert-info">No hay looks publicados a√∫n.</div>
    </div>
  {% endfor %}
</div>
{% endblock %}